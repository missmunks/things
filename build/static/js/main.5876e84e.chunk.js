(this.webpackJsonpthings=this.webpackJsonpthings||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n(4),a=n(1),o=n(20),c=n.n(o),i=n(3),u=n(9),l=n(2),j=n.n(l),h=n(6),p=function(e){var t=e.type,n=e.setToken,o=e.setUser,c=Object(a.useState)(""),i=Object(r.a)(c,2),l=i[0],p=i[1],d=Object(a.useState)(""),b=Object(r.a)(d,2),O=b[0],g=b[1],f="login"===t?"Login":"Register",x="login"===t?"Register":"Login",m="login"===t?"register":"login",v=function(){var e=Object(h.a)(j.a.mark((function e(s){var r,a,c,i,u,h,d,b;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),console.log("userName",l),e.next=4,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/users/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:l,password:O}})});case 4:return r=e.sent,e.next=7,r.json();case 7:if(a=e.sent,c=a.data,i=null===c||void 0===c?void 0:c.token,localStorage.setItem("myToken",i),u=localStorage.getItem("myToken"),console.log(u),!i){e.next=24;break}return n(i),e.next=17,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/users/me",{method:"GET",headers:{Authorization:"Bearer ".concat(i)}});case 17:return h=e.sent,e.next=20,h.json();case 20:d=e.sent,b=d.data,console.log("data",b),o(b);case 24:p(""),g("");case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:f}),Object(s.jsxs)("form",{onSubmit:v,children:[Object(s.jsx)("input",{type:"text",value:l,onChange:function(e){return p(e.target.value)},placeholder:"user name"}),Object(s.jsx)("input",{type:"password",value:O,onChange:function(e){return g(e.target.value)},placeholder:"password"}),Object(s.jsx)("button",{type:"submit",children:f})]}),Object(s.jsx)(u.b,{to:"".concat(m),children:x})]})},d=n(22),b=function e(t){var n=t.token,o=t.posts,c=t.setPosts,i=Object(a.useState)(""),u=Object(r.a)(i,2),l=u[0],p=u[1],b=Object(a.useState)(""),O=Object(r.a)(b,2),g=O[0],f=O[1],x=Object(a.useState)(""),m=Object(r.a)(x,2),v=m[0],N=m[1],y=Object(a.useState)(""),k=Object(r.a)(y,2),P=k[0],S=k[1],T=Object(a.useState)(""),w=Object(r.a)(T,2),C=w[0],X=w[1],E=function(){var e=Object(h.a)(j.a.mark((function e(t){var s,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",alert("Whoa there Nelly, you can't put your junk here until we deem you worthy. Log in or register to join the cool kids."));case 2:return t.preventDefault(),X(C),e.next=6,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({post:{title:l,price:g,description:v,location:P,author:C}})});case 6:return s=e.sent,e.next=9,s.json();case 9:r=e.sent,console.log(r),c([r.data.posts].concat(Object(d.a)(o))),console.log(r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("form",{onSubmit:e,children:[Object(s.jsx)("input",{type:"text",placeholder:"Title",onChange:function(e){return p(e.target.value)}}),Object(s.jsx)("input",{type:"text",placeholder:"Price",onChange:function(e){return f(e.target.value)}}),Object(s.jsx)("input",{type:"text",placeholder:"description",onChange:function(e){return N(e.target.value)}}),Object(s.jsx)("input",{type:"text",placeholder:"Location",onChange:function(e){return S(e.target.value)}}),Object(s.jsx)("button",{type:"submit",onClick:E,children:"ADD AWESOMENESS"})]})})},O=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],o=t[1],c=localStorage.getItem("myToken");console.log(c,"NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN");var i=Object(a.useState)(""),u=Object(r.a)(i,2),l=u[0],p=u[1];Object(a.useEffect)((function(){d()}));var d=function(){var e=Object(h.a)(j.a.mark((function e(){var t,n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts",{headers:{Authorization:"Bearer ".concat(c)}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,s=n.data.posts,console.log(s,"unauth posts"),o(s),console.log(s,"are these posts");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log(n,"XXXXXXXXXXXXXXXXXXXXXX");var b=n._id,O=function(){var e=Object(h.a)(j.a.mark((function e(t){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts/".concat(b,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({posts:{messages:l}})});case 3:return n=e.sent,e.next=6,n.json();case 6:s=e.sent,console.log(s,"handle message dataaaaaaaaaaaaaaaaaaaaaaaa"),p("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return console.log("this is the post from message form",n),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("form",{onSubmit:O,children:[Object(s.jsx)("textarea",{placeholder:"Write Message",value:l,onChange:function(e){return p(e.target.value)}}),Object(s.jsx)("button",{type:"submit",children:"Send Message"})]})})},g=function(e){var t=e.token,n=e.posts,r=e.setPosts;Object(a.useEffect)((function(){c()}),[]);var o=function(){var e=Object(h.a)(j.a.mark((function e(n){var s,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts/".concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});case 2:return s=e.sent,e.next=5,s.json();case 5:r=e.sent,console.log(r,"handle delete data");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(h.a)(j.a.mark((function e(){var n,s,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/posts",{headers:{Authorization:"Bearer ".concat(t)}});case 2:return n=e.sent,e.next=5,n.json();case 5:s=e.sent,a=s.data.posts,r(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.jsx)(s.Fragment,{children:n.map((function(e){var n=e.title,r=e.description,a=e.price,c=e.location,i=e._id;e.author,e.messages,e.username;return Object(s.jsxs)("div",{className:"post",children:[Object(s.jsx)("h2",{children:n}),Object(s.jsx)("h3",{children:a}),Object(s.jsxs)("div",{children:[" ",r]}),"[On Request]"===c?Object(s.jsxs)("h3",{children:["Location: ",c]}):"",Object(s.jsxs)("h3",{children:["Posted By: ",e.author.username]}),"".concat(t)&&!e.isAuthor?Object(s.jsx)(O,{}):"","".concat(t)&&e.isAuthor?Object(s.jsx)("button",{className:"btn btn-outline-info",children:"Edit"}):"","".concat(t)&&"jess"===e.author.username?Object(s.jsx)("button",{className:"btn btn-outline-danger",onClick:function(){o(i)},children:"Delete"}):""]},i)}))})},f=function(e){var t=e.token;return Object(s.jsxs)("nav",{className:"nav",children:[Object(s.jsx)(u.b,{to:"/Profile",children:"Profile"}),Object(s.jsx)(u.b,{to:"/AllPosts",children:"Posts"}),Object(s.jsx)(u.b,{to:"/login",children:t?"Logout":"Login"}),Object(s.jsx)(u.b,{to:"/AddPost",children:"AddPost"})]})},x=function(e){var t=e.token,n=(e.setUser,e.posts,e.user);e.content,e.setContent;Object(a.useEffect)((function(){l()}),[]),console.log("potatoes");var o=Object(a.useState)([]),c=Object(r.a)(o,2),i=c[0],u=c[1],l=function(){var e=Object(h.a)(j.a.mark((function e(){var n,s,r,a,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2010-CPU-RM-WEB-PT/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:return a=e.sent,e.next=5,a.json();case 5:o=e.sent,console.log("user posts: ",null===o||void 0===o||null===(n=o.data)||void 0===n?void 0:n.posts),console.log(o,"This is the data where the messages should be"),console.log("user messages : ",null===o||void 0===o||null===(s=o.data)||void 0===s?void 0:s.messages),u(null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.messages);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:" Messages sent to you: "}),Object(s.jsxs)("div",{children:[" ",null===i||void 0===i?void 0:i.map((function(e,t){return console.log("biscuits"),Object(s.jsxs)("div",{children:[Object(s.jsxs)("h3",{children:[" Message From: ",e.fromUser.username===(null===n||void 0===n?void 0:n.username)?e.fromUser.username:""," "]}),Object(s.jsxs)("h4",{children:[e.post.title," "]}),Object(s.jsxs)("p",{children:[e.content," "]})," ",Object(s.jsx)("hr",{})," ",Object(s.jsx)("br",{})]},t)}))]})]})})},m=(n(34),n(35),function(){var e=Object(a.useState)(""),t=Object(r.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)({}),u=Object(r.a)(c,2),l=u[0],j=u[1],h=Object(a.useState)([]),d=Object(r.a)(h,2),m=d[0],v=d[1],N=Object(a.useState)(null),y=Object(r.a)(N,2);y[0],y[1];return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h1",{children:"Strangers Things"}),Object(s.jsx)(f,{token:n}),l.username&&Object(s.jsxs)("h2",{children:["Hello ",l.username]}),Object(s.jsx)(i.a,{path:"/login",children:Object(s.jsx)(p,{setToken:o,type:"login",setUser:j,posts:m})}),Object(s.jsx)(i.a,{path:"/register",children:Object(s.jsx)(p,{setToken:o,type:"register",setUser:j})}),Object(s.jsx)(i.a,{path:"/Profile",children:Object(s.jsx)(x,{token:n,setToken:o,user:l,setUser:j,posts:m})}),Object(s.jsx)(i.a,{path:"/AllPosts",children:Object(s.jsx)(g,{MessageForm:O,token:n,posts:m,setPosts:v})}),Object(s.jsx)(i.a,{path:"/AddPost",children:Object(s.jsx)(b,{token:n,posts:m,setPosts:v})})]})});c.a.render(Object(s.jsx)(u.a,{children:Object(s.jsx)(m,{})}),document.getElementById("app"))}},[[36,1,2]]]);
//# sourceMappingURL=main.5876e84e.chunk.js.map